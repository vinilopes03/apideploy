services:
  api:
    build: .
    ports:
      - "8080:8080"
    env_file:
      - api.env
    depends_on:
      - redis

  worker:
    build: .
    command: ["celery", "-A", "worker:celery_app", "worker", "--loglevel=INFO", "--concurrency=2"]
    env_file:
      - api.env
    depends_on:
      - redis

  redis:
    image: redis:7-alpine
